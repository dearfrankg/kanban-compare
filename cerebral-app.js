webpackJsonp([0,3],{0:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),o=a(r),u=n(153),i=a(u),l=n(154),c=a(l),d=n(210),f=a(d),s=n(219),p=n(228),b=a(p),v=n(230),y=a(v),g=n(349),h=a(g),_=n(350),O=a(_),m=(0,c["default"])((0,f["default"])({}));m.addModules({kanban:(0,h["default"])(),recorder:(0,b["default"])(),devtools:function(){}}),m.on("change",function(){O["default"].set("cerebral_app",m.get("kanban.data"))}),i["default"].render(o["default"].createElement(s.Container,{controller:m,app:y["default"]}),document.getElementById("app"))},230:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i,l,c,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=n(1),s=a(f),p=n(219),b=n(231),v=a(b),y=n(236),g=n(319),h=a(g),_=(i=(0,y.DragDropContext)(h["default"]),l=(0,p.Decorator)(),i(c=l(c=function(e){function t(){var e,n,a,u;r(this,t);for(var i=arguments.length,l=Array(i),c=0;i>c;c++)l[c]=arguments[c];return n=a=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.addItem=function(){a.props.signals.kanban.laneCreated({name:"New lane"})},u=n,o(a,u)}return u(t,e),d(t,[{key:"render",value:function(){return s["default"].createElement("div",null,s["default"].createElement("button",{className:"add-lane",onClick:this.addItem},"+"),s["default"].createElement(v["default"],null))}}]),t}(s["default"].Component))||c)||c);t["default"]=_},231:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(1),f=a(d),s=n(219),p=n(232),b=a(p),v=n(318),y=a(v),g=(i=(0,s.Decorator)({lanes:y["default"]}),i(l=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),c(t,[{key:"render",value:function(){var e=this.props.lanes;return f["default"].createElement("div",{className:"lanes"},e.map(this.renderLane))}},{key:"renderLane",value:function(e){return f["default"].createElement(b["default"],{className:"lane",key:e.id,lane:e})}}]),t}(f["default"].Component))||l);t["default"]=g},232:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var l,c,d,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),p=a(s),b=n(219),v=n(233),y=a(v),g=n(234),h=a(g),_=n(236),O=n(317),m=a(O),k={hover:function(e,t){var n=t.getItem(),a=n.id;e.lane.notes.length||n.onAttach({laneId:e.lane.id,noteId:a})}},j=(l=(0,_.DropTarget)(m["default"].NOTE,k,function(e){return{connectDropTarget:e.dropTarget()}}),c=(0,b.Decorator)({kanban:"kanban"}),l(d=c(d=function(e){function t(){var e,n,a,r;o(this,t);for(var i=arguments.length,l=Array(i),c=0;i>c;c++)l[c]=arguments[c];return n=a=u(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.editNote=function(e,t){return t.trim()?void a.props.signals.kanban.noteUpdated({id:e,task:t,editing:!1}):void a.props.signals.kanban.noteUpdated({id:e,editing:!1})},a.addNote=function(e){e.stopPropagation();var t=a.props.lane.id;a.props.signals.kanban.noteCreated({laneId:t,note:{task:"New task"}})},a.deleteNote=function(e,t){t.stopPropagation();var n=a.props.lane.id;a.props.signals.kanban.noteDeleted({laneId:n,noteId:e})},a.editName=function(e){var t=a.props.lane.id;return e.trim()?void a.props.signals.kanban.laneUpdated({id:t,name:e,editing:!1}):void a.props.signals.kanban.laneUpdated({id:t,editing:!1})},a.deleteLane=function(e){e.stopPropagation();var t=a.props.lane.id;a.props.signals.kanban.laneDeleted({id:t})},a.activateLaneEdit=function(){var e=a.props.lane.id;a.props.signals.kanban.laneUpdated({id:e,editing:!0})},a.activateNoteEdit=function(e){a.props.signals.kanban.noteUpdated({id:e,editing:!0})},r=n,u(a,r)}return i(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.connectDropTarget,n=e.lane,a=r(e,["connectDropTarget","lane"]);return t(p["default"].createElement("div",a,p["default"].createElement("div",{className:"lane-header",onClick:this.activateLaneEdit},p["default"].createElement("div",{className:"lane-add-note"},p["default"].createElement("button",{onClick:this.addNote},"+")),p["default"].createElement(h["default"],{className:"lane-name",editing:n.editing,value:n.name,onEdit:this.editName}),p["default"].createElement("div",{className:"lane-delete"},p["default"].createElement("button",{onClick:this.deleteLane},"x"))),p["default"].createElement(y["default"],{notes:n.notes,onValueClick:this.activateNoteEdit,onEdit:this.editNote,onDelete:this.deleteNote})))}}]),t}(p["default"].Component))||d)||d);t["default"]=j},233:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(1),f=a(d),s=n(219),p=n(234),b=a(p),v=n(235),y=a(v),g=(i=(0,s.Decorator)({kanban:"kanban"}),i(l=function(e){function t(){var e,n,a,u;r(this,t);for(var i=arguments.length,l=Array(i),c=0;i>c;c++)l[c]=arguments[c];return n=a=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.renderNote=function(e){var t=a.props,n=t.onValueClick,r=t.onEdit,o=t.onDelete;return f["default"].createElement(y["default"],{className:"note",id:e.id,key:e.id,editing:e.editing,onAttach:a.attachNote,onMove:a.moveNote},f["default"].createElement(b["default"],{editing:e.editing,value:e.task,onValueClick:n.bind(null,e.id),onEdit:r.bind(null,e.id),onDelete:o.bind(null,e.id)}))},a.moveNote=function(e){var t=e.sourceId,n=e.targetId;a.props.signals.kanban.noteMoved({sourceId:t,targetId:n})},a.attachNote=function(e){var t=e.laneId,n=e.noteId;a.props.signals.kanban.noteAttachedToLane.sync({laneId:t,noteId:n})},u=n,o(a,u)}return u(t,e),c(t,[{key:"render",value:function(){var e=this.props.notes;return f["default"].createElement("ul",{className:"notes"},e.map(this.renderNote))}}]),t}(f["default"].Component))||l);t["default"]=g},234:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(1),d=a(c),f=function(e){function t(){var e,n,a,r;o(this,t);for(var i=arguments.length,l=Array(i),c=0;i>c;c++)l[c]=arguments[c];return n=a=u(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.renderEdit=function(){return d["default"].createElement("input",{type:"text",ref:function(e){return e?e.selectionStart=a.props.value&&a.props.value.length:null},autoFocus:!0,defaultValue:a.props.value,onBlur:a.finishEdit,onKeyPress:a.checkEnter})},a.renderValue=function(){var e=a.props.onDelete;return d["default"].createElement("div",{onClick:a.props.onValueClick},d["default"].createElement("span",{className:"value"},a.props.value),e?a.renderDelete():null)},a.renderDelete=function(){return d["default"].createElement("button",{className:"delete",onClick:a.props.onDelete},"x")},a.checkEnter=function(e){"Enter"===e.key&&a.finishEdit(e)},a.finishEdit=function(e){var t=e.target.value;a.props.onEdit&&a.props.onEdit(t)},r=n,u(a,r)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=(e.value,e.onEdit,e.onValueClick,e.editing),n=r(e,["value","onEdit","onValueClick","editing"]);return d["default"].createElement("div",n,t?this.renderEdit():this.renderValue())}}]),t}(d["default"].Component);t["default"]=f},235:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var l,c,d,f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=n(1),b=a(p),v=(n(219),n(236)),y=n(317),g=a(y),h={beginDrag:function(e){return{id:e.id,onAttach:e.onAttach}},isDragging:function(e,t){return e.id===t.getItem().id}},_=null,O={hover:function(e,t){var n=e.id,a=t.getItem(),r=a.id;_!==n&&(_=n,r!==n&&e.onMove({sourceId:r,targetId:n}))}},m=(l=(0,v.DragSource)(g["default"].NOTE,h,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}),c=(0,v.DropTarget)(g["default"].NOTE,O,function(e){return{connectDropTarget:e.dropTarget()}}),l(d=c(d=function(e){function t(){return o(this,t),u(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.connectDragSource,n=e.connectDropTarget,a=e.isDragging,o=(e.onMove,e.onAttach,e.id,e.editing),u=r(e,["connectDragSource","connectDropTarget","isDragging","onMove","onAttach","id","editing"]),i=o?function(e){return e}:t;return i(n(b["default"].createElement("li",f({style:{opacity:a?0:1}},u),u.children)))}}]),t}(b["default"].Component))||d)||d);t["default"]=m},317:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={NOTE:"note"}},318:function(e,t){"use strict";function n(e){return e("kanban.lanes").map(function(t){var n=e("kanban.data.lanes."+t);return a({},n,{notes:n.notes?n.notes.map(function(t){return e("kanban.data.notes."+t)}):[]})})}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t["default"]=n},349:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(350),o=a(r),u=n(351),i=a(u),l=n(354),c=a(l),d=n(356),f=a(d),s=n(359),p=a(s),b=n(361),v=a(b),y=n(363),g=a(y),h=n(365),_=a(h),O=n(367),m=a(O),k=n(369),j=a(k);t["default"]=function(){arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return function(e){var t=o["default"].get("cerebral_app")||{lanes:{},notes:{}};return e.addState({data:t,lanes:Object.keys(t.lanes)}),e.addSignals({laneCreated:i["default"],laneUpdated:c["default"],laneDeleted:f["default"],noteAttachedToLane:p["default"],noteCreated:v["default"],noteUpdated:g["default"],noteDeleted:_["default"],noteMoved:m["default"]}),e.addServices({uuid:j["default"]}),{}}}},350:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={get:function(e){try{return JSON.parse(localStorage.getItem(e))}catch(t){return null}},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))}}},351:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(352),o=a(r),u=n(353),i=a(u);t["default"]=[o["default"],i["default"]]},352:function(e,t){"use strict";function n(e){var t=e.input,n=e.state,a=e.services,r=a.kanban.uuid.v4();n.set("kanban.data.lanes."+r,{id:r,name:t.name,notes:[]})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},353:function(e,t){"use strict";function n(e){var t=e.state;t.set("kanban.lanes",Object.keys(t.get("kanban.data.lanes")))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},354:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(355),o=a(r);t["default"]=[o["default"]]},355:function(e,t){"use strict";function n(e){var t=e.input,n=e.state;n.get("kanban.data.lanes."+t.id);n.merge("kanban.data.lanes."+t.id,t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},356:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(357),o=a(r),u=n(358),i=a(u),l=n(353),c=a(l);t["default"]=[o["default"],i["default"],c["default"]]},357:function(e,t){"use strict";function n(e){var t=e.input,n=e.state,a=n.get("kanban.data.lanes."+t.id+".notes");n.unset("kanban.data.notes",a)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},358:function(e,t){"use strict";function n(e){var t=e.input,n=e.state,a=n.get("kanban.lanes");n.set("kanban.lanes",a.filter(function(e){return e!==t.id})),n.unset("kanban.data.lanes."+t.id)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},359:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(360),o=a(r);t["default"]=[o["default"]]},360:function(e,t){"use strict";function n(e){var t=e.input,n=e.state,a=t.laneId,r=t.noteId,o=n.select("kanban"),u=o.get("data.notes."+r),i=o.get("data.lanes."+u.laneId),l=i.notes.indexOf(r);u.laneId!==a&&(o.set("data.notes."+r+".laneId",a),o.splice("data.lanes."+u.laneId+".notes",l,1),o.push("data.lanes."+a+".notes",r))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},361:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(362),o=a(r);t["default"]=[o["default"]]},362:function(e,t){"use strict";function n(e){var t=e.input,n=e.state,a=e.services,r=t.laneId,o=t.note;o.id=a.kanban.uuid.v4(),o.laneId=r,n.set("kanban.data.notes."+o.id,o),n.push("kanban.data.lanes."+r+".notes",o.id)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},363:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(364),o=a(r);t["default"]=[o["default"]]},364:function(e,t){"use strict";function n(e){var t=e.input,n=e.state;n.get("kanban.data.notes."+t.id);n.merge("kanban.data.notes."+t.id,t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},365:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(366),o=a(r);t["default"]=[o["default"]]},366:function(e,t){"use strict";function n(e){var t=e.input,n=e.state,a=t.laneId,r=t.noteId,o=n.get("kanban.data.lanes."+a+".notes").indexOf(r);n.splice("kanban.data.lanes."+a+".notes",o,1),n.unset("kanban.data.notes."+r)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},367:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(368),o=a(r);t["default"]=[o["default"]]},368:function(e,t){"use strict";function n(e){var t=e.input,n=e.state,a=t.sourceId,r=t.targetId,o=n.select("kanban"),u=o.get("data.notes."+a+".laneId"),i=o.get("data.notes."+r+".laneId"),l=o.get("data.lanes."+u),c=o.get("data.lanes."+i),d="data.lanes."+u+".notes",f="data.lanes."+i+".notes";o.splice(d,l.notes.indexOf(a),1),l===c?o.splice(d,l.notes.indexOf(r),0,a):(o.splice(f,l.notes.indexOf(r),0,a),o.set("data.notes."+a+".laneId",i))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},369:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(370),o=a(r);t["default"]=o["default"]}});